@model List<Conversation>

<h3>📨 پیام‌های دریافتی</h3>

@if (!Model.Any())
{
    <p>پیامی وجود ندارد.</p>
}
else
{
    <ul class="list-group">
        @foreach (var c in Model)
        {
            int myId = int.Parse(User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)!.Value);
            int otherId = c.User1Id == myId ? c.User2Id : c.User1Id;

            <li class="list-group-item d-flex justify-content-between">
                گفتگو با کاربر شماره @otherId
                <a asp-action="OpenChat"
                   asp-route-otherUserId="@otherId"
                   class="btn btn-sm btn-primary">
                    باز کردن
                </a>
            </li>
        }
    </ul>
}
